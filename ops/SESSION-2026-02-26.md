# Session Log — 2026-02-26

## Scope
- Openclaw v2026.2.24 upgrade using dev-first process
- Dev lane infrastructure fixes (cdp_net subnet collision)

## What Changed
### 1) Infrastructure / Runtime
- **Openclaw version bump**: `ARG OPENCLAW_VERSION=2026.2.23` → `2026.2.24` in Dockerfile (on `dev` branch)
- **Dev cdp_net subnet isolation**: Added network override in `docker-compose.dev.yml` — dev uses `172.31.0.0/24` (prod uses `172.30.0.0/24`) to avoid Docker network collision
- **Dev chromium IP**: Set `172.31.0.10` for chromium in dev overlay to match new subnet
- Files: `automation/openclaw-image/Dockerfile`, `automation/docker-compose.dev.yml`

### 2) Dev Stack Validation
- Dev stack deployed with `--project-name automation-dev` on VM
- Openclaw v2026.2.24 confirmed running (`node -e "require('/app/package.json').version"`)
- Gateway serving Control UI on port 18789
- n8n health check passing from within dev Openclaw container
- Production stack verified unaffected (all containers still up)

### 3) Operations / Docs
- Updated `ops/today.md` with dev stack status and version pin notes
- Merged `main` into `dev` to sync all recent fixes before upgrade

## Deployment Notes
- Deploy method: Manual SSH + `docker compose up -d --build` (CI smoke test passed but didn't rebuild)
- Dev stack validated: yes
- Production deploy: merged `dev` → `main` (fast-forward), pushed, rebuilt openclaw service
- Production Openclaw v2026.2.24 confirmed running, gateway healthy
- Post-deploy ownership check: passed

## Validation Checks Passed
- Openclaw v2026.2.24 running in dev container
- Gateway serving Control UI (dev and prod)
- n8n reachable from dev Openclaw (healthz → OK)
- Production Openclaw v2026.2.24 confirmed after merge
- No breaking changes in v2026.2.24 (unlike v2026.2.23 which required `controlUi.allowedOrigins`)
- All 11 production services healthy

## Backups Taken
- None (minor version bump, no schema changes)

## Known Risks / Notes
- Dev stack still running alongside production on the same VM
- CI deploy-dev workflow completed fast (14s) — may not have rebuilt image; manual deploy was needed
- Dev Openclaw shares config.json with production (same volume mount) — not isolated for config changes

## Session Status
- **COMPLETE** — first successful dev-first upgrade process
